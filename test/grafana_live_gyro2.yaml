# Logger config for motion050998
# Generated by: local/sikuliaq/utils/generate_grafana_live_stream.py --grafana_url http://shp-openrvdas-test:3000 motion050998
# Date: 2026-01-06T15:34:51.596123+00:00

readers:
  class: UDPReader
  kwargs:
    port: 53123
transforms:
- class: RegexTransform
  module: local.sikuliaq.coriolix.logger.transforms.regex_transform
  kwargs:
    return_das_record: true
    field_patterns:
      MGHDT: '^\WMGHDT,(?P<heading>\d+\.\d+),T\*(?P<checksum>[0-9A-F]{2})$'
      MGHCR: '^\WMGHCR'
      MGTHS: '^\WMGTHS,(?P<heading_true_actual>\d+\.\d+),(?P<heading_status>[AEMSV])\*(?P<checksum>[0-9A-F]{2})$'
      MGROT: '^\WMGROT,(?P<rate_of_turn>\d+\.\d+),(?P<rot_status>[AV])\*(?P<checksum>[0-9A-F]{2})$'
      PSXN: '\WPSXN,23,(?P<roll>\-?\d+\.\d+)?,(?P<pitch>\-?\d+\.\d+)?,(?P<head>\-?\d+\.\d+)?,(?P<heave>\-?\d+\.\d+)?\*(?P<checksum>[0-9A-F]{2})$'
    default_data_id: motion050998
- class: ConvertFieldsTransform
  module: logger.transforms.convert_fields_transform
  kwargs:
    delete_source_fields: true
    delete_unconverted_fields: true
    fields:
      heave:
        data_type: float
      head:
        data_type: float
      hgt_qual:
        data_type: int
      horiz_qual:
        data_type: int
      pitch:
        data_type: float
      roll:
        data_type: float
      rp_qual:
        data_type: int
      head_qual:
        data_type: int
      rate_of_turn:
        data_type: float
writers:
- class: TextFileWriter
- class: GrafanaLiveWriter
  module: logger.writers.grafana_live_writer
  kwargs:
    host: http://shp-openrvdas-test:3000
    stream_id: openrvdas
    token_file: /opt/openrvdas/grafana_token.txt

